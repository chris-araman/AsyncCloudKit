<!DOCTYPE html>
<html lang="en">
  <head>
    <title>AsyncCloudKit  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="AsyncCloudKit  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          AsyncCloudKit 1.0.1 Docs
        </a>
         (100% documented)
      </p>
    
      <div class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </div>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/chris-araman/AsyncCloudKit">
            <img class="header-icon" src="img/gh.png" alt="GitHub"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">AsyncCloudKit Reference</a>
      <img class="carat" src="img/carat.png" alt=""/>
      AsyncCloudKit  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/Progress.html">Progress</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions.html#/c:objc(cs)CKContainer">CKContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions.html#/c:objc(cs)CKDatabase">CKDatabase</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ACKContainer.html">ACKContainer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ACKDatabase.html">ACKDatabase</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ACKSequence.html">ACKSequence</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ACKSequence/Iterator.html">‚Äì Iterator</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='Ô∏è-asynccloudkit' class='heading'>‚õÖÔ∏è AsyncCloudKit</h1>

<p>Swift extensions for asynchronous CloudKit record processing. Designed for simplicity.</p>

<p><a href="https://swiftpackageindex.com/chris-araman/AsyncCloudKit"><img src="https://img.shields.io/endpoint?label=swift&logo=swift&style=flat-square&url=https%3A%2F%2Fswiftpackageindex.com%2Fapi%2Fpackages%2Fchris-araman%2FAsyncCloudKit%2Fbadge%3Ftype%3Dswift-versions" alt="Swift"></a>
<a href="https://swiftpackageindex.com/chris-araman/AsyncCloudKit"><img src="https://img.shields.io/endpoint?label=platforms&logo=apple&style=flat-square&url=https%3A%2F%2Fswiftpackageindex.com%2Fapi%2Fpackages%2Fchris-araman%2FAsyncCloudKit%2Fbadge%3Ftype%3Dplatforms" alt="Platforms"></a>
<a href="https://github.com/chris-araman/AsyncCloudKit/blob/main/LICENSE.md"><img src="https://img.shields.io/github/license/chris-araman/AsyncCloudKit?style=flat-square&color=informational" alt="License"></a>
<a href="https://github.com/chris-araman/AsyncCloudKit/releases"><img src="https://img.shields.io/github/v/tag/chris-araman/AsyncCloudKit?style=flat-square&color=informational&label=release&sort=semver" alt="Release"></a></p>

<p><a href="https://github.com/chris-araman/AsyncCloudKit/actions/workflows/ci.yml?query=branch%3Amain"><img src="https://img.shields.io/github/workflow/status/chris-araman/AsyncCloudKit/Continuous%20Integration/main?style=flat-square&logo=github&label=lint%20%7C%20build%20%7C%20test" alt="Lint | Build | Test"></a>
<a href="https://app.codecov.io/gh/chris-araman/AsyncCloudKit/"><img src="https://img.shields.io/codecov/c/github/chris-araman/AsyncCloudKit/main?style=flat-square&color=informational" alt="Coverage"></a></p>

<p>AsyncCloudKit exposes <a href="https://developer.apple.com/documentation/cloudkit">CloudKit</a> operations as
<a href="https://docs.swift.org/swift-book/LanguageGuide/Concurrency.html#ID639">async functions</a> and
<a href="https://docs.swift.org/swift-book/LanguageGuide/Concurrency.html#ID640">AsyncSequences</a>.</p>
<h2 id='adding-asynccloudkit-to-your-project' class='heading'>üì¶ Adding AsyncCloudKit to Your Project</h2>

<p>AsyncCloudKit is a <a href="https://developer.apple.com/documentation/swift_packages">Swift Package</a>.
Add a dependency on AsyncCloudKit to your
<a href="https://docs.swift.org/package-manager/PackageDescription/PackageDescription.html"><code>Package.swift</code></a> using
<a href="https://developer.apple.com/documentation/xcode/adding_package_dependencies_to_your_app">Xcode</a> or the
<a href="https://swift.org/package-manager/">Swift Package Manager</a>. Optionally, specify a
<a href="https://docs.swift.org/package-manager/PackageDescription/PackageDescription.html#package-dependency-requirement">version requirement</a>.</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
  <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/chris-araman/AsyncCloudKit.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"1.0.0"</span><span class="p">)</span>
<span class="p">]</span>
</code></pre>

<p>Then resolve the dependency:</p>
<pre class="highlight shell"><code>swift package resolve
</code></pre>

<p>To update to the latest AsyncCloudKit version compatible with your version requirement:</p>
<pre class="highlight shell"><code>swift package update AsyncCloudKit
</code></pre>
<h2 id='using-asynccloudkit-in-your-project' class='heading'>üå§ Using AsyncCloudKit in Your Project</h2>

<p>Swift concurrency allows you to process CloudKit records asynchronously, without writing a lot of boilerplate code involving
<a href="https://developer.apple.com/documentation/cloudkit/ckoperation/"><code>CKOperation</code></a>s and completion blocks.
Here, we perform a query on our
<a href="https://developer.apple.com/documentation/cloudkit/ckdatabase"><code>CKDatabase</code></a>, then process the results
asynchronously. As each <a href="https://developer.apple.com/documentation/cloudkit/ckrecord"><code>CKRecord</code></a> is read from the
database, we print its <code>name</code> field.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">CloudKit</span>
<span class="kd">import</span> <span class="kt">AsyncCloudKit</span>

<span class="kd">func</span> <span class="nf">queryDueItems</span><span class="p">(</span><span class="nv">database</span><span class="p">:</span> <span class="kt">CKDatabase</span><span class="p">,</span> <span class="nv">due</span><span class="p">:</span> <span class="kt">Date</span><span class="p">)</span> <span class="k">async</span> <span class="k">throws</span> <span class="p">{</span>
  <span class="k">for</span> <span class="k">try</span> <span class="k">await</span> <span class="n">record</span> <span class="k">in</span> <span class="n">database</span>
    <span class="o">.</span><span class="nf">performQuery</span><span class="p">(</span><span class="nv">ofType</span><span class="p">:</span> <span class="s">"ToDoItem"</span><span class="p">,</span> <span class="nv">where</span><span class="p">:</span> <span class="kt">NSPredicate</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="s">"due &gt;= %@"</span><span class="p">,</span> <span class="n">due</span><span class="p">))</span> <span class="p">{</span> <span class="p">(</span><span class="nv">record</span><span class="p">:</span> <span class="kt">CKRecord</span><span class="p">)</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"</span><span class="se">\(</span><span class="n">record</span><span class="o">.</span><span class="n">name</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre>
<h3 id='cancellation' class='heading'>Cancellation</h3>

<p>AsyncCloudKit functions that return an <code><a href="Structs/ACKSequence.html">ACKSequence</a></code> queue an operation immediately. Iterating
the sequence allows you to inspect the results of the operation. If you stop iterating the sequence early,
the operation may be cancelled.</p>

<p>Note that because the <code>atBackgroundPriority</code> functions are built on <code>CKDatabase</code> methods that do not provide means of
cancellation, they cannot be canceled. If you need operations to respond to requests for cooperative cancellation,
please use the publishers that do not have <code>atBackgroundPriority</code> in their names. You can still specify
<a href="https://developer.apple.com/documentation/foundation/qualityofservice/background"><code>QualityOfService.background</code></a>
by passing in a
<a href="https://developer.apple.com/documentation/cloudkit/ckoperation/configuration"><code>CKOperation.Configuration</code></a>.</p>
<h2 id='documentation' class='heading'>üìò Documentation</h2>

<p>üíØ% <a href="https://asynccloudkit.hiddenplace.dev">documented</a> using <a href="https://github.com/realm/jazzy">Jazzy</a>.
Hosted by <a href="https://pages.github.com">GitHub Pages</a>.</p>
<h2 id='Ô∏è-contributing' class='heading'>‚ù§Ô∏è Contributing</h2>

<p><a href="https://github.com/chris-araman/AsyncCloudKit/blob/main/CONTRIBUTING.md">Contributions</a> are welcome!</p>
<h2 id='further-reading' class='heading'>üìö Further Reading</h2>

<p>To learn more about Swift Concurrency and CloudKit, watch these videos from WWDC:</p>

<ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2021/10134/">Explore structured concurrency in Swift</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2021/10019/">Discover concurrency in SwiftUI</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2021/10254/">Swift concurrency: Behind the scenes</a></li>
</ul>

<p>&hellip;or review Apple&rsquo;s documentation:</p>

<ul>
<li><a href="https://developer.apple.com/icloud/cloudkit/">CloudKit Overview</a></li>
<li><a href="https://developer.apple.com/documentation/cloudkit">CloudKit Documentation</a></li>
<li><a href="https://docs.swift.org/swift-book/LanguageGuide/Concurrency.html">Swift Language Features for Concurrency</a></li>
<li><a href="https://developer.apple.com/documentation/swift/swift_standard_library/concurrency">Apple Concurrency Module</a></li>
</ul>

<p>If you&rsquo;re looking for Swift Combine extensions for CloudKit, take a look at
<a href="https://github.com/chris-araman/CombineCloudKit">CombineCloudKit</a>!</p>
<h2 id='license' class='heading'>üìú License</h2>

<p>AsyncCloudKit was created by <a href="https://github.com/chris-araman">Chris Araman</a>. It is published under the
<a href="https://github.com/chris-araman/AsyncCloudKit/blob/main/LICENSE.md">MIT license</a>.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2021 <a class="link" href="https://github.com/chris-araman" target="_blank" rel="external noopener">Chris Araman</a>. All rights reserved. (Last updated: 2021-12-26)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ‚ô™‚ô´ v0.14.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
    </section>
  </body>
</html>
